# Chatix Widget
Пример реализации виджета chatix

**chatixWidget** - объект доступный сразу после подключения виджета.

### Свойства

| Свойство | Тип | Описание |
| ------------ | ------------ | ------------ |
| chatixWidget.onConnect | `function(){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после успешного подключения. |
| chatixWidget.onNewMessageReceived | `function(message: Message){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана при получении нового сообщения. |
| chatixWidget.onNewMessageSent | `function(message: Message){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после отправки нового сообщения. |
| chatixWidget.onManagerConnected | `function(manager: Manager){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после подключения менеджера к диалогу. |
| chatixWidget.onManagerDisconnected | `function(manager: Manager){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после отключения менеджера от диалога. |
| chatixWidget.onVisitorOpenedWindow | `function(){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после открытия выжэета. |
| chatixWidget.onVisitorClosedWindow | `function(){}` | Свойству может быть назначена функция обратного вызова, которая будет вызвана после закрытия виджета. |


### Методы

#### chatixWidget.setVisitor(visitorUpdate: visitorUpdate): Void
| Аргумент | Тип | Описание |
| --- | --- | --- |
| visitorUpdate | object | Объект с обновляемыми данными посетителя. |
Метод позволяет обновить информацию о посетителе.


## Вспомогательные классы

### Visitor
**Visitor** - объект представляет данные о текущем посетителе сайта.

| Свойство  | Тип | Описание  |
| ------------ | ------------ | ------------ |
| uuid | string *(read-only)* | Уникальный идентификатор посетителя в Chatix. Например: `6ea5d198-762a-11e9-8f9e-2a86e4085a59`. Не изменяйте значение этого свойства. |
| name | string | Отображаемое имя посетителя. Может быть его ник, ФИО или другая информация, по которой можно обращаться к вашему посетителю. |
| email | string | Адрес электронной почты. Например: `demo@example.com` |
| fields | object | Пользовательские поля посетителя. Каждый сайт и приложение имеет свой особый набор полей, которые он хочет установить посетителю. Это могут быть: внутренний идентификатор, состояние баланса, содержимое корзины и многое другое. Свойство представляет собой обычный объект с полями и значениями. Мы рекомендуем обращаться к данным в этом объекте в виде ассоциативного массива `fields["Property name"]` чтобы получить возможность использовать осмысленные фразы в качестве ключа поля. |
| avatar_preview | string | Превью аватара посетителя |
| avatar | string | Аватар посетителя в оригинальном размере |
| browser_language | string | Язык браузера посетителя. Используется для определения языка виджета по умолчанию |
| city | string | Город посетителя |
| country | string | Страна посетителя |
| current_page_title | string | Заголовок текущейстраницы посетителя |
| current_url | string | url адрес текущей страницы посетителя |
| ip | string | ip посетителя |
| is_screen_cast_allowed | boolean | Отметка давал ли посетитель разрешение на просмотр экрана |
| online_time | int | Время онлайна посетителя в чате |
| last_activity | int | Время последней активности посетителя |
| is_online | boolean | Онлайн ли посетитель в данный момент |
| time_zone_offset | int | Смещение часового пояса |
| utm_campaign | string | UTM метка по которой посетитель попал на сайт |
| utm_content | string | UTM метка по которой посетитель попал на сайт |
| utm_medium | string | UTM метка по которой посетитель попал на сайт |
| utm_source | string | UTM метка по которой посетитель попал на сайт |
| utm_term | string | UTM метка по которой посетитель попал на сайт |

### Manager
**Manager** - объект представляет данные о менеджере.

| Свойство  | Тип | Описание  |
| ------------ | ------------ | ------------ |
| uuid | string *(read-only)* | Уникальный идентификатор менеджера в Chatix. |
| name | string | Имя менеджера. |
| email | string | Адрес электронной почты. |
| status | boolean | Показывает подключен ли менеджер к диалогу |
| isOnline | bool | В сети мнеджер в данный момент или нет. |
| avatar_thumb100_url | string | Превью аватара менеджера размером 100x100px. |
| avatar_thumb300_url | string | Превью аватара менеджера размером 300x300px. |
| avatar_url | string | Аватар менеджера в оригинальном размере. |


### Message
**Message** - экземпляры данного класса предоставляют информацию о сообщении в чате. В Chatix существует 3 разных вида сообщений: текстовое сообщение, сообщение с файлом и сообщение с картинкой. Комбинации вроде "сообщение с текстом и файлом одновременно" в Chatix не поддерживаются, такие комбинации должны быть разделены на разные сообщения, но вы можете создать подобный эффект визуальными средствами..

| Свойство  | Тип | Описание  |
| ------------ | ------------ | ------------ |
| uuid | string *(read-only)* | Идентификатор сообщения. |
| type | int | Тип сообщения, 0 - текстовое, 4 - картинка, 5 - файл |
| sender_flag | int | Флаг направления сообщения. 0 - сообщение посетителя, 1 - сообщение консультанта |
| sender_id | string | Идентификатор отправителя. Либо идентификатор посетителя, либо идентификатор консультанта, в зависимости от `sender_flag`. |
| content | string | Контент сообщения. Формат содержимого зависит от типа сообщения (поле `type`). Для текстовых сообщений (`type == 0`) - простая строка содежимого. Для сообщений с изображением или файлом (`type == 4 или type == 5`) - строка содержит ссылку на файл. |


###visitorUpdate
**visitorUpdate** - объект с обновляемыми данными о посетителе. 

| Свойство  | Тип | Описание  |
| ------------ | ------------ | ------------ |
| name | string | Имя. |
| email | string | Email. |
| fields | object  | Объект с дополнительными полями, где ключ является названием поля. |